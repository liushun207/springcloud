server:
  port: 9010
  tomcat:
    uri-encoding: utf-8
  servlet:
    context-path: /

spring:
  application:
    name: feign-consumer
  # \u5F53\u9047\u5230\u540C\u6837\u540D\u5B57bean\u7684\u65F6\u5019\uFF0C\u662F\u5426\u5141\u8BB8\u5B9A\u4E49\u91CD\u5199
  main:
    allow-bean-definition-overriding: true

#  profiles:
#    active: dev

# eureka \u670D\u52A1\u6CE8\u518C\u914D\u7F6E
eureka:
  client:
    service-url:
      # \u6307\u5B9A\u6CE8\u518C\u4E2D\u5FC3
      defaultZone: http://peer1:1111/eureka/

hystrix:
  command:
    default:
      # \u5F00\u542F\u8BF7\u6C42\u7F13\u5B58 \u9ED8\u8BA4\u5F00\u542F\uFF0C 1\u964D\u4F4E\u8BF7\u6C42\u7EBF\u7A0B\u6D88\u8017 2 \u964D\u4F4E\u8BF7\u6C42\u54CD\u5E94
      requestCache:
        enabled: true
      execution:
        # \u65AD\u8DEF\u5668`hystrix`\u7684\u8D85\u65F6\u65F6\u95F4\u9700\u8981\u5927\u4E8Eribbon\u7684\u8D85\u65F6\u65F6\u95F4\uFF0C\u4E0D\u7136\u4E0D\u4F1A\u89E6\u53D1\u91CD\u8BD5\u3002
        isolation:
          thread:
            timeoutInMilliseconds: 3000

# \u5168\u5C40\u914D\u7F6E
#ribbon:
#  #\u8BF7\u6C42\u8FDE\u63A5\u7684\u8D85\u65F6\u65F6\u95F4
#  ConnectTimeout: 3000
#  #\u8BF7\u6C42\u5904\u7406\u7684\u8D85\u65F6\u65F6\u95F4
#  ReadTimeout: 5000
#  #\u5BF9\u6240\u6709\u64CD\u4F5C\u8BF7\u6C42\u90FD\u8FDB\u884C\u91CD\u8BD5
#  OkToRetryOnAllOperations: false
#  #\u5207\u6362\u5B9E\u4F8B\u7684\u91CD\u8BD5\u6B21\u6570
#  MaxAutoRetriesNextServer: 0
#  #\u5BF9\u5F53\u524D\u5B9E\u4F8B\u7684\u91CD\u8BD5\u6B21\u6570
#  MaxAutoRetries: 0

hello-server:
  ribbon:
    #\u8BF7\u6C42\u8FDE\u63A5\u7684\u8D85\u65F6\u65F6\u95F4
    ConnectTimeout: 250
    #\u8BF7\u6C42\u5904\u7406\u7684\u8D85\u65F6\u65F6\u95F4
    ReadTimeout: 1000
    #\u5BF9\u6240\u6709\u64CD\u4F5C\u8BF7\u6C42\u90FD\u8FDB\u884C\u91CD\u8BD5
    OkToRetryOnAllOperations: true
    #\u5207\u6362\u5B9E\u4F8B\u7684\u91CD\u8BD5\u6B21\u6570
    MaxAutoRetriesNextServer: 2
    #\u5BF9\u5F53\u524D\u5B9E\u4F8B\u7684\u91CD\u8BD5\u6B21\u6570
    MaxAutoRetries: 1
    #\u6839\u636E\u5982\u4E0A\u914D\u7F6E\uFF0C\u5F53\u8BBF\u95EE\u5230\u6545\u969C\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u518D\u5C1D\u8BD5\u8BBF\u95EE\u4E00\u6B21\u5F53\u524D\u5B9E\u4F8B

# \u5F00\u542F hystrix
feign:
  hystrix:
    enabled: true
  compression:
    # \u5F00\u542F\u8BF7\u6C42\u54CD\u5E94\u7684\u538B\u7F29\u529F\u80FD
    request:
      enabled: true
      # \u4E00\u4E0B\u90FD\u662F\u9ED8\u8BA4\u503C\uFF0C\u6307\u5B9A\u538B\u7F29\u7684\u8BF7\u6C42\u7C7B\u578B\uFF0C\u8BF7\u6C42\u5927\u5C0F\u8D85\u8FC72048\u5C31\u538B\u7F29
      mime-types: text/xml,application/xml,application/json
      min-request-size: 2048
    response:
      enabled: true